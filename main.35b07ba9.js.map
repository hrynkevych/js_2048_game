{"version":3,"sources":["scripts/main.js"],"names":["BUTTON_START","document","querySelector","MESSAGE_START","MESSAGE_LOSE","MESSAGE_WIN","GAME_SCORE","GAME_FIELD","SCORE","INTERNAL_FIELD","ROWS","COLUMNS","setRandomCellValue","hasEmptyCell","r","Math","floor","random","c","renderGameField","cell","children","num","textContent","classList","value","add","setMessageWin","remove","setMessageLose","resetField","field","forEach","e","splice","slide","row","filteredRow","filter","el","i","length","push","slideLeft","slideRight","reversedRow","reverse","slideUp","slideDown","addEventListener","key"],"mappings":"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","file":"main.35b07ba9.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst BUTTON_START = document.querySelector('.start');\nconst MESSAGE_START = document.querySelector('.message-start');\nconst MESSAGE_LOSE = document.querySelector('.message-lose');\nconst MESSAGE_WIN = document.querySelector('.message-win');\nconst GAME_SCORE = document.querySelector('.game-score');\nconst GAME_FIELD = document.querySelector('tbody');\n\nlet SCORE = 0;\n\nconst INTERNAL_FIELD = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst [ ROWS, COLUMNS ] = [ 4, 4 ];\n\nBUTTON_START.addEventListener('click', () => {\n  BUTTON_START.classList.remove('start');\n  BUTTON_START.classList.add('restart');\n  BUTTON_START.textContent = 'Restart';\n  MESSAGE_START.classList.add('hidden');\n  MESSAGE_LOSE.classList.add('hidden');\n  MESSAGE_WIN.classList.add('hidden');\n  SCORE = 0;\n  GAME_SCORE.textContent = SCORE;\n\n  resetField(INTERNAL_FIELD);\n\n  setRandomCellValue();\n  setRandomCellValue();\n});\n\ndocument.addEventListener('keydown', (e) => {\n  switch (e.key) {\n    case 'ArrowLeft':\n      slideLeft();\n      break;\n\n    case 'ArrowRight':\n      slideRight();\n      break;\n\n    case 'ArrowUp':\n      slideUp();\n      break;\n\n    case 'ArrowDown':\n      slideDown();\n      break;\n  }\n\n  GAME_SCORE.textContent = SCORE;\n\n  setMessageLose();\n  setMessageWin();\n  setRandomCellValue();\n});\n\nfunction setRandomCellValue() {\n  if (!hasEmptyCell()) {\n    return;\n  }\n\n  const r = Math.floor(Math.random() * ROWS);\n  const c = Math.floor(Math.random() * COLUMNS);\n\n  if (INTERNAL_FIELD[r][c] === 0) {\n    INTERNAL_FIELD[r][c] = (Math.random() >= 0.9) ? 4 : 2;\n    renderGameField();\n  } else {\n    setRandomCellValue();\n  }\n}\n\nfunction hasEmptyCell() {\n  for (let r = 0; r < ROWS; r++) {\n    for (let c = 0; c < COLUMNS; c++) {\n      if (INTERNAL_FIELD[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction renderGameField() {\n  for (let r = 0; r < ROWS; r++) {\n    for (let c = 0; c < COLUMNS; c++) {\n      const cell = GAME_FIELD.children[r].children[c];\n      const num = INTERNAL_FIELD[r][c];\n\n      cell.textContent = '';\n      cell.classList.value = '';\n      cell.classList.add('field-cell');\n\n      if (num > 0) {\n        cell.classList.add(`field-cell--${num}`);\n        cell.textContent = num;\n      }\n    }\n  }\n}\n\nfunction setMessageWin() {\n  for (let r = 0; r < ROWS; r++) {\n    for (let c = 0; c < COLUMNS; c++) {\n      if (INTERNAL_FIELD[r][c] === 2048) {\n        MESSAGE_WIN.classList.remove('hidden');\n      }\n    }\n  }\n}\n\nfunction setMessageLose() {\n  if (hasEmptyCell()) {\n    return;\n  }\n\n  for (let r = 0; r < ROWS - 1; r++) {\n    for (let c = 0; c < COLUMNS - 1; c++) {\n      if (INTERNAL_FIELD[r][c] === INTERNAL_FIELD[r][c + 1]\n        || INTERNAL_FIELD[r][c] === INTERNAL_FIELD[r + 1][c]) {\n        return;\n      }\n    }\n  }\n\n  MESSAGE_LOSE.classList.remove('hidden');\n}\n\nfunction resetField(field) {\n  return field.forEach(e => e.splice(0, COLUMNS, 0, 0, 0, 0));\n}\n\nfunction slide(row) {\n  let filteredRow = row.filter(el => el !== 0);\n\n  for (let i = 0; i < filteredRow.length - 1; i++) {\n    if (filteredRow[i] === filteredRow[i + 1]) {\n      filteredRow[i] *= 2;\n      filteredRow[i + 1] = 0;\n      SCORE += filteredRow[i];\n    }\n  }\n\n  filteredRow = filteredRow.filter(el => el !== 0);\n\n  while (filteredRow.length < ROWS) {\n    filteredRow.push(0);\n  }\n\n  return filteredRow;\n}\n\nfunction slideLeft() {\n  for (let r = 0; r < ROWS; r++) {\n    const row = INTERNAL_FIELD[r];\n\n    const filteredRow = slide(row);\n\n    INTERNAL_FIELD[r] = filteredRow;\n\n    renderGameField();\n  }\n}\n\nfunction slideRight() {\n  for (let r = 0; r < ROWS; r++) {\n    const row = INTERNAL_FIELD[r];\n\n    const reversedRow = slide([...row].reverse());\n\n    INTERNAL_FIELD[r] = reversedRow.reverse();\n\n    renderGameField();\n  }\n}\n\nfunction slideUp() {\n  for (let c = 0; c < COLUMNS; c++) {\n    const row = [INTERNAL_FIELD[0][c],\n      INTERNAL_FIELD[1][c],\n      INTERNAL_FIELD[2][c],\n      INTERNAL_FIELD[3][c]];\n\n    const filteredRow = slide(row);\n\n    INTERNAL_FIELD[0][c] = filteredRow[0];\n    INTERNAL_FIELD[1][c] = filteredRow[1];\n    INTERNAL_FIELD[2][c] = filteredRow[2];\n    INTERNAL_FIELD[3][c] = filteredRow[3];\n\n    renderGameField();\n  }\n}\n\nfunction slideDown() {\n  for (let c = 0; c < COLUMNS; c++) {\n    const row = [INTERNAL_FIELD[0][c],\n      INTERNAL_FIELD[1][c],\n      INTERNAL_FIELD[2][c],\n      INTERNAL_FIELD[3][c]];\n\n    const reversedRow = slide([...row].reverse());\n\n    reversedRow.reverse();\n\n    INTERNAL_FIELD[0][c] = reversedRow[0];\n    INTERNAL_FIELD[1][c] = reversedRow[1];\n    INTERNAL_FIELD[2][c] = reversedRow[2];\n    INTERNAL_FIELD[3][c] = reversedRow[3];\n\n    renderGameField();\n  }\n}\n"]}